name: aws tools

run-name: ${{ inputs.env_name }} operation 

on:
  workflow_dispatch:
    inputs:
      env_name:
        description: "env name; eg: sandbox"
        default: sandbox
        required: true
        type: choice
        options:
          - sandbox
          - dev
          - staging
          - prod

jobs:
  clear-iam-cert:
    name: clear iam cert
    runs-on: ubuntu-latest
    environment: ${{ inputs.env_name }}
    steps:
      - name: download and clear
        run: |
          wget -q https://github.com/nnsay/aws-tools/releases/download/v0.0.1/linux-amd64-aws-tools
          chmod +x linux-amd64-aws-tools
          ./linux-amd64-aws-tools iam delete-expired-certification
        env:
          ENV_NAME: ${{ env.ENV_NAME }}

